let popRadius,circleRadiusMult,circleSpeedDiv,circleRadiusMin,lightRadius;function updateScreenVars(i,t){let e,n;return window.innerWidth<768||window.innerHeight<550?(e=i/2,popRadius=5,circleSpeedDiv=400,circleRadiusMin=10,n=t/2,circleRadiusMult=n-circleRadiusMin,lightRadius=500):(e=i,popRadius=10,circleSpeedDiv=300,circleRadiusMin=10,n=t,circleRadiusMult=n-circleRadiusMin,lightRadius=900),[e,n]}const currentSpawnMode="top",globalDirection={vx:.2,vy:.8},colors=["#eb3b42","#ff9101","#fecb1c","#60c774","#02aeda","#5d5ccc"];function animateCanvas(i,t=14,e=40,n={x:null,y:null}){let r=updateScreenVars(t,e),s=r[0],o=r[1];const a=document.getElementById(i),h=a.getContext("2d");function d(){const i=document.getElementById("canvas_light").getBoundingClientRect();let t=a.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top;n.x=i.left,n.y=i.top-t+window.scrollY}function l(){r=updateScreenVars(t,e),s=r[0],o=r[1];const i=a.getBoundingClientRect();a.width=i.width,a.height=i.height,d()}function c(i="def"){this.colorIndex=Math.floor(Math.random()*colors.length),this.frame=0,this.colorTransition=0,this.directionOverride=null,this.directionOverrideFrames=0,this.vx=(Math.random()-.5)/2,this.vy=(Math.random()-.5)/2,this.radius=Math.floor(Math.random()*circleRadiusMult+circleRadiusMin),this.shadow_length=2e3,"def"===i?(this.x=Math.floor(Math.random()*a.width+1),this.y=Math.floor(Math.random()*a.height+1)):"top"===i?(this.x=Math.floor(Math.random()*a.width+1),this.y=-Math.floor(50*Math.random()+2*o)):"left"===i&&(this.x=-Math.floor(50*Math.random()+2*o),this.y=Math.floor(.5*Math.random()*a.height+1)),this.rotate=function(){const i=(60-this.radius)/circleSpeedDiv;let t;if(this.directionOverride){const i=this.directionOverrideFrames/100;t={vx:this.directionOverride.vx*i+globalDirection.vx*(1-i),vy:this.directionOverride.vy*i+globalDirection.vy*(1-i)}}else t=globalDirection;if(this.x+=t.vx*i,this.y+=t.vy*i,this.directionOverride&&(this.directionOverrideFrames--,this.directionOverrideFrames<=0&&(this.directionOverride=null)),this.y-this.radius>a.height)for(f.splice(f.indexOf(this),1);f.length<s;)f.push(new c("top"));if(this.x-this.radius>a.width)for(f.splice(f.indexOf(this),1);f.length<s;)f.push(new c("left"));this.frame++,this.frame%200==0?(this.colorIndex=(this.colorIndex+1)%colors.length,this.colorTransition=0):this.colorTransition+=.005};this.draw=function(){if(this.radius>0){const i=h.lineWidth;h.beginPath(),h.arc(this.x,this.y,this.radius,0,2*Math.PI);const t=hexToRgb(colors[this.colorIndex]),e=hexToRgb(colors[(this.colorIndex+1)%colors.length]);h.fillStyle=lerpColor(t,e,this.colorTransition),h.fill(),h.strokeStyle="#000000",h.lineWidth=2,h.stroke(),h.lineWidth=i}},this.drawShadow=function(){const i=Math.atan2(n.y-this.y,n.x-this.x),t=this.x+this.shadow_length*Math.sin(-i-Math.PI/2),e=this.y+this.shadow_length*Math.cos(-i-Math.PI/2);h.beginPath(),h.moveTo(this.x,this.y),h.lineTo(t,e),h.lineWidth=2*this.radius+2,h.strokeStyle="#122a4c",h.stroke()},this.pop=function(){for(let i=0;i<10;i++)p.push(new u(this.x,this.y))}}function u(i,t){this.x=i,this.y=t,this.vx=2*Math.random()-1,this.vy=2*Math.random()-1,this.radius=5*Math.random()+2,this.lifespan=100,this.update=function(){this.x+=this.vx,this.y+=this.vy,this.radius-=.1,this.lifespan--},this.draw=function(){this.radius>0&&(h.beginPath(),h.arc(this.x,this.y,this.radius,0,2*Math.PI),h.fillStyle="#fff",h.fill())}}const f=[],p=[];for(l(),function i(){let t;for(h.clearRect(0,0,a.width,a.height),function(){h.beginPath(),h.arc(n.x,n.y,1e4,0,2*Math.PI);let i=h.createRadialGradient(n.x,n.y,0,n.x,n.y,lightRadius);i.addColorStop(0,"#1f4165"),i.addColorStop(1,"#122a4c"),h.fillStyle=i,h.fill()}(),f.forEach((i=>{i.rotate(),i.drawShadow()})),t=0;t<f.length;t++)v(t),f[t]&&f[t].draw();p.forEach(((i,t)=>{i.update(),i.draw(),i.lifespan<=0&&p.splice(t,1)})),requestAnimationFrame(i)}();f.length<s;)f.push(new c);function v(i){for(let t=f.length-1;t>=0;t--)if(f[t]&&f[i]&&t!==i){const e=f[i].x-f[t].x,n=f[i].y-f[t].y,r=Math.sqrt(e*e+n*n);if(r<f[i].radius+f[t].radius){f[i].radius=f[i].radius>1?f[i].radius-=1:1,f[t].radius=f[t].radius>1?f[t].radius-=1:1;let s=e/r,o=n/r;f[t]&&f[t].radius<popRadius?(f[t].pop(),f.splice(t,1),f.push(new c("top"))):f[t]&&(f[t].vx=-s,f[t].vy=-o,f[t].directionOverride={vx:-s,vy:-o},f[t].directionOverrideFrames=100),f[i]&&f[i].radius<popRadius?(f[i].pop(),f.splice(i,1),f.push(new c("top"))):f[i]&&(f[i].vx=s,f[i].vy=o,f[i].directionOverride={vx:s,vy:o},f[i].directionOverrideFrames=100)}}}window.addEventListener("resize",l),window.addEventListener("scroll",(function(){d()}))}function hexToRgb(i){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function lerpColor(i,t,e){const n=i.r,r=i.g,s=i.b;return`rgb(${n+e*(t.r-n)}, ${r+e*(t.g-r)}, ${s+e*(t.b-s)})`}animateCanvas("canvas",14,40),animateCanvas("canvas2",10,25);